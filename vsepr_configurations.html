<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>VSEPR Configurations</title>
	<link href="molecule-page.css" rel="stylesheet" type="text/css">
	<script src="jsmol/JSmol.min.js"></script>
	<script src="vsepr_molecules.js"></script>
	<script>
		var info = {
			color: "#FFFFFF", 
			height: 500,      
			width: 500,
			j2sPath: "jsmol/j2s",
			// Change the initial molecule here.
			script: "load PDB/vsepr_01_BeCl2.mol; spacefill 20%; wireframe 0.15; spin off; frank on; background=white; antialiasDisplay=true; set showMultipleBonds OFF;",
			debug: false
		};
	</script>
</head>

<body>
<!--	TODO: Consistent orientations for all of the vsepr_configurations. -->
<!--	TODO: Make the central atoms purple and the peripheral atoms white. -->

	<header>
		<div id="name" class="app">
			VSEPR Configurations
		</div>
	</header>
	
	<main>
		<section class="molecule">

			<div id="window" class="app">
				<script type="text/javascript">
					Jmol.getApplet("main", info);
				</script>
			</div>

			<div id="controls" class="app">
				<div id="control_state" class="option">
					<strong>State:</strong>
					
					<select name="state" id="configuration" onChange="loadNew();"></select>
				</div>
				
				<div id="info" class="option">
					<strong>Molecule:</strong>
					<div id="info_name"></div>
				</div>

				<div id="control_bg" class="option">
					<strong>Background Color:</strong>
					
					<input type="radio" name="bg_color" id="bg_white" onclick="changeColor('white');" checked="checked">
					<label for="bg_white">White</label>

					<input type="radio" name="bg_color" id="bg_black" onclick="changeColor('black');">
					<label for="bg_black">Black</label>

					<input type="radio" name="bg_color" id="bg_grey" onclick="changeColor('grey');">
					<label for="bg_grey">Grey</label>
				</div>

				<div id="control_model_type" class="option">
					<strong>Model Type:</strong>
					
					<input type="radio" name="model_type" id="mt_ballstick" onclick="ballAndStick();" checked="checked">
					<label for="mt_ballstick">Ball and Stick</label>

					<input type="radio" name="model_type" id="mt_spacefill" onclick="spacefill();">
					<label for="mt_spacefill">Spacefill</label>

					<input type="radio" name="model_type" id="mt_stick" onclick="stick();">
					<label for="mt_stick">Stick Only</label>
				</div>

				<div id="control_other" class="option">
					<strong>Show Other:</strong>
					
					<input type="checkbox" name="co_spin" id="co_spin" onClick="toggleSpin();">
					<label for="co_spin">Spin</label>
					
					<input type="checkbox" name="co_lonePair" id="co_lonePair" onClick="toggleLonePair();" disabled="true">
					<label for="co_lonePair">Lone Pair(s)</label>
				</div>
			</div>
		</section>
	</main>
	
	<script>
		// sets the initWindow function to be called at page load
		window.addEventListener("load", initWindow);
			
		function initWindow(){
			var moleculeSelect = document.getElementById("configuration");
			
			// initialize all 14 options within the select
			var option01 = document.createElement("option");
			var option02 = document.createElement("option");
			var option03 = document.createElement("option");
			var option04 = document.createElement("option");
			var option05 = document.createElement("option");
			var option06 = document.createElement("option");
			var option07 = document.createElement("option");
			var option08 = document.createElement("option");
			var option09 = document.createElement("option");
			var option10 = document.createElement("option");
			var option11 = document.createElement("option");
			var option12 = document.createElement("option");
			var option13 = document.createElement("option");
			var option14 = document.createElement("option");
			
			// assign each option a corresponding molecule
			option01.molecule = vsepr_01;
			option02.molecule = vsepr_02;
			option03.molecule = vsepr_03;
			option04.molecule = vsepr_04;
			option05.molecule = vsepr_05;
			option06.molecule = vsepr_06;
			option07.molecule = vsepr_07;
			option08.molecule = vsepr_08;
			option09.molecule = vsepr_09;
			option10.molecule = vsepr_10;
			option11.molecule = vsepr_11;
			option12.molecule = vsepr_12;
			option13.molecule = vsepr_13;
			option14.molecule = vsepr_14;
			
			// give each option an appropriate label
			option01.label = "Linear";
			option02.label = "Linear (2)";
			option03.label = "Trigonal Planar";
			option04.label = "Trigonal Planar - Bent";
			option05.label = "Tetrahedral";
			option06.label = "Tetrahedral - Trigonal Pyramidal";
			option07.label = "Tetrahedral - Bent";
			option08.label = "Trigonal Bipyramidal";
			option09.label = "Trigonal Bipyramidal - Seesaw";
			option10.label = "Trigonal Bipyramidal - T-shaped";
			option11.label = "Trigonal Bipyramidal - Linear";
			option12.label = "Octahedral";
			option13.label = "Octahedral - Square Pyramidal";
			option14.label = "Octahedral - Square Planar";
			
			// link each option to the <select> element
			moleculeSelect.add(option01);
			moleculeSelect.add(option02);
			moleculeSelect.add(option03);
			moleculeSelect.add(option04);
			moleculeSelect.add(option05);
			moleculeSelect.add(option06);
			moleculeSelect.add(option07);
			moleculeSelect.add(option08);
			moleculeSelect.add(option09);
			moleculeSelect.add(option10);
			moleculeSelect.add(option11);
			moleculeSelect.add(option12);
			moleculeSelect.add(option13);
			moleculeSelect.add(option14);
			
			// IMPORTANT: Set an option as the default selected choice
			option01.selected = "selected";
			
			loadNew();
		};
		// Functions so none of the html actually touches anything to do with JSmol directly.
		
		function loadNew() {
			// load the appropriate molecule
			var molecule = getCurrentMolecule();
			var loadString = "load " + molecule.path + "; select *; spacefill 0.4;";
			
			// Hide the lone pair checkbox if there are no lone pairs
			if (molecule.nonbonded === 0) {
				document.getElementById("co_lonePair").disabled = true;
			} else {
				document.getElementById("co_lonePair").disabled = false;
			}
			
			// Set defaults
			document.getElementById("info_name").innerHTML = molecule.formula;
			document.getElementById("mt_ballstick").checked = true;
			document.getElementById("co_spin").checked = false;
			document.getElementById("co_lonePair").checked = false;
			
			Jmol.script(main, loadString);
		}
		
		function getCurrentMolecule(){
			moleculeSelect = document.getElementById("configuration");
			return moleculeSelect.options[moleculeSelect.selectedIndex].molecule;
		}
		
		function toggleSpin() {
			if (document.getElementById('co_spin').checked) {
				Jmol.script(main, 'spin on;');
			} else {
				Jmol.script(main, 'spin off;');
			}
		}
		
		function toggleLonePair() {
			if (document.getElementById('co_lonePair').checked) {
				Jmol.script(main, getCurrentMolecule().lone_pair_command);
			} else {
				Jmol.script(main, 'lcaoCartoon OFF; isosurface OFF;');
			}
		}
		
		function ballAndStick() {
			Jmol.script(main, 'wireframe 0.15; spacefill 20%');
		}
		
		function spacefill() {
			Jmol.script(main, 'spacefill 100%;');
		}
		
		function stick() {
			Jmol.script(main, 'wireframe 0.2; spacefill off;');
		}
		
		function changeColor(color) {
			var colorString = 'background ' + color + ';';
			Jmol.script(main, colorString);
		}
	</script>
</body>
</html>
